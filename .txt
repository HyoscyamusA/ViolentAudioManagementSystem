数据库表结构概览

| 表名       | 字段 |
|------------|------|
| `user`     | id, username, password, role |
| `mac`      | mac_address |
| `mac_user` | mac_address, device_name, user_id |
| `events`   | mac_address, event_datetime, user_id |




1. /audio/upload - 上传页面
功能：提供一个页面，允许用户上传音频文件。
实现：通过 render_template('upload.html') 渲染上传页面。

2. /upload_audio - 处理音频上传
功能：接收用户上传的音频文件，进行暴力事件检测，并返回分析结果。
实现：
验证文件格式（仅支持 WAV/MP3）。
保存文件到上传目录。
调用 IsViolent 函数对音频进行分析，返回暴力和非暴力事件的概率。
返回 JSON 格式的结果，包括概率和音频文件的 URL。
用户上传的音频会经过分析并返回结果。

3. /audio/files/<path:filename> - 提供音频文件
功能：提供上传的音频文件供前端访问。
实现：通过 send_from_directory 方法发送音频文件，并根据文件扩展名设置正确的 MIME 类型。
确保用户可以听到上传的音频文件。

4. /login - 用户登录
功能：提供用户登录页面，并处理登录请求。
实现：
GET 请求：渲染登录页面。
POST 请求：验证用户名和密码，成功后设置用户会话。
用户需要登录后才能访问某些功能。

5. /register - 用户注册
功能：提供用户注册页面，并处理注册请求。
实现：
GET 请求：渲染注册页面。
POST 请求：验证密码一致性，插入新用户到数据库。
用户可以通过注册创建新账户。

6. /dashboard - 用户仪表盘
功能：提供用户仪表盘页面，展示用户相关的设备和事件信息。
实现：验证用户是否登录，渲染仪表盘页面。
用户可以查看自己的设备和事件。

7. /device/bind - 设备绑定
功能：允许用户绑定设备到自己的账户。
实现：
GET 请求：渲染设备绑定页面。
POST 请求：验证 MAC 地址是否存在，检查是否已被绑定，执行绑定操作。
用户可以绑定设备到自己的账户。

8. /device/manage - 设备管理
功能：展示用户绑定的设备列表，并允许管理设备。
实现：查询数据库，返回用户绑定的设备列表。
用户可以查看和管理自己的设备。

9. /device/unbind - 设备解绑
功能：允许用户解绑设备。
实现：根据 MAC 地址和用户 ID 删除绑定记录。
用户可以解绑设备。

10. /device/update_name - 更新设备名称
功能：允许用户更新设备名称。
实现：根据 MAC 地址和用户 ID 更新设备名称。
用户可以修改设备名称。

11. /data_visualization - 数据可视化
功能：提供数据可视化页面。
实现：渲染数据可视化页面。
用户可以查看数据的可视化结果。

12. /api/line_chart_data - 获取折线图数据
功能：提供折线图数据，展示设备事件的时间分布。
实现：查询数据库，返回按日期分组的事件数据。
用户可以查看事件的时间分布。

13. /api/devices - 获取设备列表
功能：返回用户绑定的设备列表。
实现：查询数据库，返回设备 ID 和名称。
用户可以获取设备列表。

14. /api/heatmap_data - 获取热力图数据
功能：提供热力图数据，展示设备事件的分布。
实现：查询数据库，返回按月份和日期分组的事件数据。
用户可以查看事件的热力图。

15. /admin/audio_logs - 管理员音频日志
功能：管理员查看所有音频日志。
实现：验证管理员权限，遍历日志目录，返回音频文件列表。
管理员可以查看所有音频日志。

16. /admin/audio/<path:path> - 提供管理员音频文件
功能：管理员访问音频文件。
实现：验证管理员权限，发送音频文件。
管理员可以访问音频文件。

17. /personal_center - 个人中心
功能：用户修改个人信息（用户名和密码）。
实现：验证用户登录，更新用户信息。
用户可以修改个人信息。

18. /logout - 用户注销
功能：用户注销登录。
实现：清除用户会话，重定向到登录页面。
用户可以注销登录。